name: "Dozzle"
version: "0.1.48"
slug: "dozzle"
description: "Real-time log viewer for Docker containers"
url: "https://github.com/Erreur32/homeassistant-dozzle-addon"
arch:
  - armhf
  - armv7
  - aarch64
  - amd64
  - i386
init: false
startup: application
boot: auto

# Web Interface Configuration
ingress: true
ingress_port: 8080
ingress_stream: true
panel_icon: mdi:docker
panel_admin: false
panel_title: "Dozzle"
webui: "http://[HOST]:[PORT:8081]"
ingress_entry: "/"

# External Port Configuration
ports:
  8081/tcp: 8099
ports_description:
  8081/tcp: "External Port redirection - (internal:8081 -> external:8099). If port 8099 is busy, Home Assistant will automatically assign another available port. Access via Ingress remains available regardless of external port."

# System Configuration
host_network: false
host_dbus: false
devices:
  - /dev/log
  - /dev/kmsg
  - /var/run/docker.sock
watchdog: "http://[HOST]:[PORT:8080]"
usb: false
udev: true
image: "ghcr.io/erreur32/homeassistant-dozzle-addon/dozzle-{arch}"

# Configuration Options
options:
  "Remote Access (access external)": true
  "SSL": false
  "SSL Certificate": "fullchain.pem"
  "SSL Key": "privkey.pem"
  "───────────────": true
  "Dozzle Agent": false
  "Dozzle Agent Port": 7007
  "───────────────": true
  "Log Level": "info"

# Schema Configuration
schema:
  "Remote Access (access external)": bool
  "SSL": bool
  "SSL Certificate": "str?"
  "SSL Key": "str?"
  "───────────────": bool
  "Dozzle Agent": bool
  "Dozzle Agent Port": int(1,65535)
  "───────────────": bool
  "Log Level": list(trace|debug|info|notice|warning|error|fatal)

# Variables mapping (internal names for script)
map_names:
  "Remote Access (access external)": "remote_access"
  "SSL": "ssl"
  "SSL Certificate": "certfile"
  "SSL Key": "keyfile"
  "Dozzle Agent": "agent_enabled"
  "Dozzle Agent Port": "agent_port"
  "Log Level": "log_level"

# Options Descriptions
options_description:
  log_level: "Log level (trace|debug|info|notice|warning|error|fatal)"
  remote_access: "External Port - Enable access through port 8099"
  agent_enabled: "⚙️ Dozzle Agent - Enable remote agent connections"
  agent_port: "⚙️ Agent Port - Port used for remote agent (when agent is enabled)"

# System Permissions
privileged:
  - SYS_ADMIN
  - DAC_READ_SEARCH
hassio_api: true
hassio_role: default
docker_api: true
auth_api: true
map:
  - config:rw
  - ssl:rw
  - share:rw
  - backup:rw
  - media:rw
