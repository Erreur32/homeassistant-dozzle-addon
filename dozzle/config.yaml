name: "Dozzle"
version: "0.1.46"
slug: "dozzle"
description: "An add-on to view Docker logs for Home Assistant"
url: "https://github.com/Erreur32/homeassistant-dozzle-addon"
arch:
  - aarch64
  - amd64
  - armhf
  - armv7
  - i386
panel_icon: "mdi:docker"
startup: "services"
boot: "auto"
host_network: true
init: false
watchdog: "http://[HOST]:[PORT:8099]"
ingress: true
ingress_port: "[PORT:8099]"
ingress_entry: "/"
panel_admin: false
auth_api: true
webui: "http://[HOST]:[PORT:8099]"

# Ports configuration
ports:
  "[PORT:8099]/tcp": "[PORT:8099]"

# Options for the add-on
options:
  port: 8099
  log_level: "info"
  clean_logs_on_start: false
  agent: false
  agent_port: 7007

# Schema for the add-on options
schema:
  port: port
  log_level: list(trace|debug|info|notice|warning|error|fatal)
  clean_logs_on_start: bool
  agent: bool
  agent_port: port

# Docker configuration
privileged:
  - SYS_ADMIN
  - DAC_READ_SEARCH

hassio_api: true
hassio_role: default
docker_api: true

# File system mapping
map:
  - config:rw
  - ssl:rw
  - share:rw
  - backup:rw
  - media:rw

# Device access
devices:
  - /dev/log
  - /dev/kmsg
  - /var/run/docker.sock

environment:
  DOZZLE_BASE: "/"
  DOZZLE_NO_ANALYTICS: "true"
  DOZZLE_ADDR: "0.0.0.0:[PORT:8099]"
  DOZZLE_TAILSIZE: "1000"
  DOZZLE_FOLLOW: "true"
  DOZZLE_JSON: "true"
  DOZZLE_WEBSOCKET: "true"
  SUPERVISOR_TOKEN: "${SUPERVISOR_TOKEN}"

# Proxy configuration
proxy:
  - type: "tcp"
    port: "[PORT:8099]"
    host: "[HOST]"
